<!DOCTYPE html>
<html>
<head>
  <title>My Long polling chat</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
 </head>
<body>
    <div class="container">
      <br>
        <div class="jumbotron">
            <h1 class="display-4">Send Message</h1>
            <br>
            <form class="form-control" id="publish">
<!--               <input class="form-control" type="text" name="name" placeholder="Name">
              <br> -->
              <input class="form-control" type="text" name="message" placeholder="Type your message">
              <br>
              <input class="btn btn-success" type="submit" value="Send!" class="btn">
            </form>
        </div>
      <ul class="list-group" id="messages"> </ul>
    </div>
<script src=client.js ></script> 
<!-- <script>
   publish.onsubmit = function () {
    var xhr = new XMLHttpRequest ();
    xhr.open("POST", "/publish", true);
    xhr.send (JSON.stringify({message:this.elements.message.value, name:this.elements.name.value}));
    this.elements.message.value="";
    return false;
  };

  subscribe();

  function subscribe (){
    var xhr = new XMLHttpRequest ();
    xhr.open("GET", "/subscribe", true);
    console.log ('subscribed');
    xhr.onload = function (){
      console.log ('onload');
      var li=document.createElement ('li');
      li.textContent = this.responseText;
      li.classList = "list-group-item";
      messages.appendChild (li);
      subscribe();
    };
    xhr.onerror = xhr.onabort = function () {
        setTimeout (subscribe, 500);
    };

    xhr.send('');
    }; 
  
</script>   -->
</body>
</html>
